<ng-template>
  <div
      class="fs-chip"
      (click)="clicked()"
      [style.backgroundColor]="backgroundColor ? backgroundColor : (outlined ? undefined : defaultBackgroundColor)"
      [style.padding]="padding"
      [style.borderColor]="borderColor || (outlined && color ? color : null)"
      [style.width]="width"
      [style.color]="color || contrastColor || defaultColor"
      [class.suffixable]="chipSuffixes.length !== 0 || (removed.observed && removable)"
      [class.prefixable]="chipPrefixes.length !== 0"
      [class.shape-round]="shape === 'round'"
      [class.shape-square]="shape === 'square'"
      [class.size-small]="size === 'small'"
      [class.size-tiny]="size === 'tiny'"
      [class.size-micro]="size === 'micro'"
      [class.size-large]="size === 'large'"
      [class.size-medium]="size === 'medium'"
      [class.selectable]="selectable"
      [class.removable]="removable"
      [class.iconed]="!!icon"
      [class.imaged]="!!image"
      [class.outlined]="outlined"
      [class.outline-dash]="outlineDash"
      [class.selected]="selected"
      [class.clickable]="click.observed"
      [class.sub-content]="!!chipSubcontentTemplateRef">
    @if (image) {
      <img
        [src]="image"
        class="image"
        alt="">
    }
    @if (chipPrefixes.length !== 0) {
      <div class="prefixes">
        @for (chipPrefix of chipPrefixes; track chipPrefix) {
          <fs-chip-prefix
              [ngClass]="{ 'clickable': chipPrefix.click.observed }"
              [icon]="chipPrefix.icon"
              [color]="chipPrefix.color || color || contrastColor || defaultColor"
              (click)="chipPrefixClick(chipPrefix, $event, value)">
            <ng-container *ngTemplateOutlet="chipPrefix.templateRef"></ng-container>
          </fs-chip-prefix>
        }
      </div>
    }
    @if (icon) {
      <mat-icon class="icon">
        {{ icon }}
      </mat-icon>
    }
    <div
        class="fs-chip-content"
        [ngStyle]="{ 'max-width': maxWidth }">
      <ng-content></ng-content>
      @if (chipSubcontentTemplateRef) {
        <div class="fs-chip-subcontent">
          <ng-container *ngTemplateOutlet="chipSubcontentTemplateRef"></ng-container>
        </div>
      }
    </div>
    @if (selected) {
      <div class="selected-check">
        <mat-icon [style.color]="color || contrastColor || defaultColor">
          check
        </mat-icon>
      </div>
    }
    @if (chipSuffixes.length !== 0 || (removed.observed && removable)) {
      <div class="suffixes">
        @for (chipSuffix of chipSuffixes; track chipSuffix) {
          <fs-chip-suffix
              [ngClass]="{ 'clickable': chipSuffix.click.observed }"
              [icon]="chipSuffix.icon"
              [link]="chipSuffix.link"
              [linkTarget]="chipSuffix.linkTarget"
              [color]="chipSuffix.color || color || contrastColor || defaultColor"
              [tooltip]="chipSuffix.tooltip"
              (click)="chipSuffixClick(chipSuffix, $event, value)">
            <ng-container *ngTemplateOutlet="chipSuffix.templateRef"></ng-container>
          </fs-chip-suffix>
        }
        @if (removed.observed && removable) {
          <fs-chip-suffix
            [ngClass]="{ 'clickable': true }"
            [icon]="'cancel'"
            [color]="color || contrastColor || defaultColor"
            (click)="remove($event)">
          </fs-chip-suffix>
        }
      </div>
    }
  </div>
</ng-template>
@if (!hasChips) {
  <ng-container [ngTemplateOutlet]="templateRef"></ng-container>
}